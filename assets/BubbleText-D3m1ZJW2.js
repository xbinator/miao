var I=Object.defineProperty;var S=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var R=(t,e,a)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,h=(t,e)=>{for(var a in e||(e={}))L.call(e,a)&&R(t,a,e[a]);if(S)for(var a of S(e))x.call(e,a)&&R(t,a,e[a]);return t};import{J as s,aS as V,E,aT as g,w,aw as n,q as O,aU as z,aE as j,aC as _,aK as d,aV as D,s as U,aB as $,aD as A,aL as C,aP as q,A as M,C as J,aW as K,aH as P,U as W,aR as X,aX as F}from"./index-C5vDfVE0.js";function N(t,e){const a=s(()=>!!V(t)),u={step:5,interval:50},m=s(()=>{const r=V(t);return h(h({},u),typeof r=="object"?r:{})}),f=s(()=>m.value.step),b=s(()=>m.value.interval),y=E(e.value),o=E(1),c=s(()=>a.value&&g(e.value));let l=null;function T(){o.value=n(o)+f.value,l=null}function B(){l&&clearTimeout(l),l=null}w(e,()=>{const r=n(y);y.value=e.value,!c.value&&g(e.value)?o.value=e.value.length:g(e.value)&&g(r)&&e.value.indexOf(r)!==0&&(o.value=1,B())}),w([o,a,e],()=>{c.value&&g(e.value)&&n(o)<e.value.length&&!l&&(l=setTimeout(T,b.value))},{immediate:!0});const p=s(()=>c.value?e.value.slice(0,o.value):e.value),v=s(()=>c.value&&n(o)<e.value.length);return[p,v]}const G=["innerHTML"],Q=O({__name:"MessageRender",props:{content:{default:""}},setup(t){const e=t,[a]=D("message-render"),u=s(()=>z(e.content));return(m,f)=>(_(),j("div",{class:d(n(a)),innerHTML:u.value},null,10,G))}}),ee=O({__name:"BubbleText",props:{typing:{type:[Object,Boolean],default:!1},content:{default:""},reasonContent:{default:""},placement:{},avatar:{type:[Object,Boolean]},loading:{type:Boolean},isCollapse:{type:Boolean,default:!0},collapseOptions:{},size:{},toolbar:{type:[Boolean,Array]},feedback:{}},emits:["actions"],setup(t,{emit:e}){const a=t,u=e,m=s(()=>a.content),f=s(()=>a.reasonContent),[b,y]=N(()=>a.typing,m),[o,c]=N(()=>a.typing,f),l=s(()=>y.value||c.value),T=s(()=>l.value?"output":"complete"),[B,p]=D("bubble-text"),v=U({reason:!1});function r(){v.reason=!v.reason}function H(i){u("actions",i)}return w(()=>[l.value,a.loading],()=>l.value&&a.loading&&u("actions",{name:"typing-complete"}),{immediate:!0}),(i,k)=>(_(),$(n(F),{placement:i.placement,avatar:i.avatar,loading:i.loading,status:T.value,toolbar:i.toolbar,"is-collapse":i.isCollapse,onActions:H},{avatar:A(()=>[X(i.$slots,"avatar")]),default:A(()=>[C("div",{class:d([n(B)])},[i.reasonContent?(_(),j("div",{key:0,class:d(n(p)("reason-wrapper"))},[C("div",{class:d(n(p)("reason-title"))},[k[0]||(k[0]=C("div",null,"深度思考",-1)),M(n(K),{type:"",class:d(n(p)("reason-collapse")),rotate:v.reason?180:0,onClick:r},null,8,["class","rotate"])],2),J(C("div",{class:d(n(p)("reason"))},P(n(o)),3),[[W,!v.reason]])],2)):q("",!0),M(Q,{content:n(b)},null,8,["content"])],2)]),_:3},8,["placement","avatar","loading","status","toolbar","is-collapse"]))}});export{ee as default};
